<!DOCTYPE html>
<html>
  <head>
    <title>Dynamic Registration Form</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  </head>
  <body>
    <div id="app" class="container">
      <h2>Dynamic Registration Form</h2>
      <form @submit.prevent="submitForm">
        <div class="form-group">
          <label for="username">Username:</label>
          <input
            type="text"
            class="form-control"
            id="username"
            v-model="user.username"
            required
          />
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input
            type="password"
            class="form-control"
            id="password"
            v-model="user.password"
            required
          />
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirm Password:</label>
          <input
            type="password"
            class="form-control"
            id="confirmPassword"
            v-model="confirmPassword"
            required
          />
          <div v-if="passwordsDontMatch" class="alert alert-danger mt-2">
            Passwords do not match.
          </div>
        </div>
        <div class="form-group">
          <label>Mobile Operating System:</label>
          <div class="form-check" v-for="os in uniqueOperatingSystems">
            <input
              class="form-check-input"
              type="radio"
              :value="os"
              v-model="user.os"
            />
            <label class="form-check-label">{{ os }}</label>
          </div>
        </div>
        <div class="form-group" v-if="user.os">
          <label for="phoneModel">Phone Model:</label>
          <select
            class="form-control"
            id="phoneModel"
            v-model="user.phoneModel"
          >
            <option
              v-for="model in filteredPhoneModels(user.os)"
              :value="model"
            >
              {{ model }}
            </option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>

      <div class="mt-4" v-if="submitted">
        <h4>Summary:</h4>
        <p>Username: {{ user.username }}</p>
        <p>Password: Confidential</p>
        <p>Mobile OS: {{ user.os }}</p>
        <p>Phone Model: {{ user.phoneModel }}</p>
      </div>
    </div>

    <
    <script>
      new Vue({
        el: "#app",
        data: {
          user: {
            username: "",
            password: "",
            os: "",
            phoneModel: "",
          },
          confirmPassword: "",
          submitted: false,
          // Directly inserting the JSON data into the Vue instance
          phonesData: [
            { model: "HTC 10", os: "Android" },
            { model: "Nokia 6", os: "Android" },
            { model: "Samsung Galaxy 20 Ultra", os: "Android" },
            { model: "IDD VIOS Non Windows", os: "Android" },
            { model: "iPhone X", os: "IOS" },
            { model: "iPhone Xs Max", os: "IOS" },
            { model: "iPhone 11 Pro Max", os: "IOS" },
            { model: "IDD Windows Non Android", os: "IOS" },
            { model: "HP Elite x3", os: "Windows" },
            { model: "Microsoft 950", os: "Windows" },
            { model: "Microsoft 950XL", os: "Windows" },
            { model: "IDD VIOS Non Android", os: "Windows" },
          ],
        },
        computed: {
          passwordsDontMatch() {
            return this.user.password !== this.confirmPassword;
          },
          uniqueOperatingSystems() {
            // Creating a Set to hold unique OS values
            const osSet = new Set(this.phonesData.map((phone) => phone.os));
            return Array.from(osSet); // Converting the Set back into an Array for Vue to iterate over
          },
        },
        methods: {
          submitForm() {
            this.submitted = true;
          },
          filteredPhoneModels(os) {
            // Filtering the phone models based on the selected OS
            return this.phonesData
              .filter((phone) => phone.os === os)
              .map((phone) => phone.model);
          },
        },
      });
    </script>
  </body>
</html>
